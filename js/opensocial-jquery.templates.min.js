/*
 * opensocial-jquery templates 0.1.0
 * http://code.google.com/p/opensocial-jquery/
 *
 * Copyright(C) 2009 LEARNING RESOURCE LAB
 * http://friendfeed.com/nakajiman
 * http://hp.submit.ne.jp/d/16750/
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if(!window.os){jQuery.fn.extend({compile:function(){this.each(function(){var a=parseInt(this.jscompile)||0;if(a==0){os.compileNode_(this)}this.jscompile=a+1});return this},render:function(a){return this.compile().each(function(){jstProcess(os.createContext(a||{}),this)})}});function log(a){if(window.console){console.log(a)}}var STRING_empty="";var CSS_display="display";var CSS_position="position";var TYPE_boolean="boolean";var TYPE_number="number";var TYPE_object="object";var TYPE_string="string";var TYPE_function="function";var TYPE_undefined="undefined";function jsLength(a){return a.length}function copyProperties(c,b){for(var a in b){c[a]=b[a]}}function getDefaultObject(b,a){if(typeof b!=TYPE_undefined&&b!=null){return(b)}else{return a}}function isArray(a){return a!=null&&typeof a==TYPE_object&&typeof a.length==TYPE_number}function arraySlice(c,b,a){return Function.prototype.call.apply(Array.prototype.slice,arguments)}function parseInt10(a){return parseInt(a,10)}function arrayClear(a){a.length=0}function bindFully(b,d,c){var a=arraySlice(arguments,2);return function(){return d.apply(b,a)}}var DOM_ELEMENT_NODE=1;var DOM_ATTRIBUTE_NODE=2;var DOM_TEXT_NODE=3;var DOM_CDATA_SECTION_NODE=4;var DOM_ENTITY_REFERENCE_NODE=5;var DOM_ENTITY_NODE=6;var DOM_PROCESSING_INSTRUCTION_NODE=7;var DOM_COMMENT_NODE=8;var DOM_DOCUMENT_NODE=9;var DOM_DOCUMENT_TYPE_NODE=10;var DOM_DOCUMENT_FRAGMENT_NODE=11;var DOM_NOTATION_NODE=12;function domGetElementById(a,b){return a.getElementById(b)}function domCreateElement(b,a){return b.createElement(a)}function domTraverseElements(b,c){var a=new DomTraverser(c);a.run(b)}function DomTraverser(a){this.callback_=a}DomTraverser.prototype.run=function(a){var b=this;b.queue_=[a];while(jsLength(b.queue_)){b.process_(b.queue_.shift())}};DomTraverser.prototype.process_=function(b){var a=this;a.callback_(b);for(var d=b.firstChild;d;d=d.nextSibling){if(d.nodeType==DOM_ELEMENT_NODE){a.queue_.push(d)}}};function domGetAttribute(b,a){return b.getAttribute(a)}function domSetAttribute(b,a,c){b.setAttribute(a,c)}function domRemoveAttribute(b,a){b.removeAttribute(a)}function domCloneNode(a){return a.cloneNode(true)}function domCloneElement(a){return(domCloneNode(a))}function ownerDocument(a){if(!a){return document}else{if(a.nodeType==DOM_DOCUMENT_NODE){return(a)}else{return a.ownerDocument||document}}}function domCreateTextNode(a,b){return a.createTextNode(b)}function domAppendChild(a,b){return a.appendChild(b)}function displayDefault(a){a.style[CSS_display]=""}function displayNone(a){a.style[CSS_display]="none"}function positionAbsolute(a){a.style[CSS_position]="absolute"}function domInsertBefore(a,b){return b.parentNode.insertBefore(a,b)}function domReplaceChild(a,b){return b.parentNode.replaceChild(a,b)}function domRemoveNode(a){return domRemoveChild(a.parentNode,a)}function domRemoveChild(a,b){return a.removeChild(b)}function stringTrim(a){return stringTrimRight(stringTrimLeft(a))}function stringTrimLeft(a){return a.replace(/^\s+/,"")}function stringTrimRight(a){return a.replace(/\s+$/,"")}var VAR_index="Index";var VAR_count="Count";var VAR_this="$this";var VAR_context="$context";var VAR_top="$top";var VAR_loop="$loop";var GLOB_default="$default";var CHAR_colon=":";var REGEXP_semicolon=/\s*;\s*/;function JsEvalContext(a,b){this.constructor_.apply(this,arguments)}JsEvalContext.prototype.constructor_=function(a,b){var c=this;if(!c.vars_){c.vars_={}}if(b){copyProperties(c.vars_,b.vars_)}else{copyProperties(c.vars_,JsEvalContext.globals_)}c.vars_[VAR_this]=a;c.vars_[VAR_context]=c;c.data_=getDefaultObject(a,STRING_empty);if(!b){c.vars_[VAR_top]=c.data_}};JsEvalContext.globals_={};JsEvalContext.setGlobal=function(a,b){JsEvalContext.globals_[a]=b};JsEvalContext.setGlobal(GLOB_default,null);JsEvalContext.recycledInstances_=[];JsEvalContext.create=function(b,c){if(jsLength(JsEvalContext.recycledInstances_)>0){var a=JsEvalContext.recycledInstances_.pop();JsEvalContext.call(a,b,c);return a}else{return new JsEvalContext(b,c)}};JsEvalContext.recycle=function(a){for(var b in a.vars_){delete a.vars_[b]}a.data_=null;JsEvalContext.recycledInstances_.push(a)};JsEvalContext.prototype.jsexec=function(b,a){try{return b.call(a,this.vars_,this.data_)}catch(c){log("jsexec EXCEPTION: "+c+" at "+a+" with "+b);return JsEvalContext.globals_[GLOB_default]}};JsEvalContext.prototype.clone=function(e,b,d){var a=JsEvalContext.create(e,this);if(typeof(b)=="number"||typeof(d)=="number"){var c={};c[VAR_index]=b;c[VAR_count]=d;a.setVariable(VAR_loop,c)}return a};JsEvalContext.prototype.setVariable=function(a,b){this.vars_[a]=b};JsEvalContext.prototype.getVariable=function(a){return this.vars_[a]};JsEvalContext.prototype.evalExpression=function(c,b){var a=jsEvalToFunction(c);return this.jsexec(a,b)};var STRING_a="a_";var STRING_b="b_";var STRING_with="with (a_) with (b_) return ";JsEvalContext.evalToFunctionCache_={};function jsEvalToFunction(b){if(!JsEvalContext.evalToFunctionCache_[b]){try{JsEvalContext.evalToFunctionCache_[b]=new Function(STRING_a,STRING_b,STRING_with+b)}catch(a){log("jsEvalToFunction ("+b+") EXCEPTION "+a)}}return JsEvalContext.evalToFunctionCache_[b]}function jsEvalToSelf(a){return a}function jsEvalToValues(h){var d=[];var a=h.split(REGEXP_semicolon);for(var e=0,c=jsLength(a);e<c;++e){var f=a[e].indexOf(CHAR_colon);if(f<0){continue}var b=stringTrim(a[e].substr(0,f));var g=jsEvalToFunction(a[e].substr(f+1));d.push(b,g)}return d}function jsEvalToExpressions(f){var c=[];var a=f.split(REGEXP_semicolon);for(var d=0,b=jsLength(a);d<b;++d){if(a[d]){var e=jsEvalToFunction(a[d]);c.push(e)}}return c}var ATT_select="jsselect";var ATT_instance="jsinstance";var ATT_display="jsdisplay";var ATT_values="jsvalues";var ATT_vars="jsvars";var ATT_eval="jseval";var ATT_transclude="transclude";var ATT_content="jscontent";var ATT_skip="jsskip";var ATT_innerselect="jsinnerselect";var ATT_jstcache="jstcache";var PROP_jstcache="__jstcache";var STRING_jsts="jsts";var CHAR_asterisk="*";var CHAR_dollar="$";var CHAR_period=".";var CHAR_ampersand="&";var STRING_div="div";var STRING_id="id";var STRING_asteriskzero="*0";var STRING_zero="0";function jstProcess(a,d,c){var b=new JstProcessor;JstProcessor.prepareTemplate_(d);b.document_=ownerDocument(d);b.run_(bindFully(b,b.jstProcessOuter_,a,d))}function JstProcessor(){}JstProcessor.jstid_=0;JstProcessor.jstcache_={};JstProcessor.jstcache_[0]={};JstProcessor.jstcacheattributes_={};JstProcessor.attributeValues_={};JstProcessor.attributeList_=[];JstProcessor.prepareTemplate_=function(a){if(!a[PROP_jstcache]){domTraverseElements(a,function(b){JstProcessor.prepareNode_(b)})}};var JST_ATTRIBUTES=[[ATT_select,jsEvalToFunction],[ATT_display,jsEvalToFunction],[ATT_values,jsEvalToValues],[ATT_vars,jsEvalToValues],[ATT_eval,jsEvalToExpressions],[ATT_transclude,jsEvalToSelf],[ATT_content,jsEvalToFunction],[ATT_skip,jsEvalToFunction],[ATT_innerselect,jsEvalToFunction]];JstProcessor.prepareNode_=function(e){if(e[PROP_jstcache]){return e[PROP_jstcache]}var c=domGetAttribute(e,ATT_jstcache);if(c!=null){return e[PROP_jstcache]=JstProcessor.jstcache_[c]}var m=JstProcessor.attributeValues_;var d=JstProcessor.attributeList_;d.length=0;for(var g=0,l=jsLength(JST_ATTRIBUTES);g<l;++g){var b=JST_ATTRIBUTES[g][0];var k=domGetAttribute(e,b);m[b]=k;if(k!=null){d.push(b+"="+k)}}if(d.length==0){domSetAttribute(e,ATT_jstcache,STRING_zero);return e[PROP_jstcache]=JstProcessor.jstcache_[0]}var j=d.join(CHAR_ampersand);if(c=JstProcessor.jstcacheattributes_[j]){domSetAttribute(e,ATT_jstcache,c);return e[PROP_jstcache]=JstProcessor.jstcache_[c]}var a={};for(var g=0,l=jsLength(JST_ATTRIBUTES);g<l;++g){var h=JST_ATTRIBUTES[g];var b=h[0];var f=h[1];var k=m[b];if(k!=null){a[b]=f(k)}}c=STRING_empty+ ++JstProcessor.jstid_;domSetAttribute(e,ATT_jstcache,c);JstProcessor.jstcache_[c]=a;JstProcessor.jstcacheattributes_[j]=c;return e[PROP_jstcache]=a};JstProcessor.prototype.run_=function(g){var i=this;var l=i.calls_=[];var k=i.queueIndices_=[];var e=i.arrayPool_=[];g();var d,h;var a,c,b;var j;while(l.length){d=l[l.length-1];h=k[k.length-1];if(h>=d.length){i.recycleArray_(l.pop());k.pop();continue}a=d[h++];c=d[h++];b=d[h++];k[k.length-1]=h;a.call(i,c,b)}};JstProcessor.prototype.push_=function(a){this.calls_.push(a);this.queueIndices_.push(0)};JstProcessor.prototype.createArray_=function(){if(this.arrayPool_.length){return this.arrayPool_.pop()}else{return[]}};JstProcessor.prototype.recycleArray_=function(a){arrayClear(a);this.arrayPool_.push(a)};JstProcessor.prototype.jstProcessOuter_=function(c,e){var f=this;var h=f.jstAttributes_(e);var b=h[ATT_transclude];if(b){var g=jstGetTemplate(b);if(g){domReplaceChild(g,e);var d=f.createArray_();d.push(f.jstProcessOuter_,c,g);f.push_(d)}else{domRemoveNode(e)}return}var a=h[ATT_select];if(a){f.jstSelect_(c,e,a)}else{f.jstProcessInner_(c,e)}};JstProcessor.prototype.jstProcessInner_=function(b,q){var n=this;var h=n.jstAttributes_(q);var l=h[ATT_display];if(l){var a=b.jsexec(l,q);if(!a){displayNone(q);return}displayDefault(q)}var r=h[ATT_vars];if(r){n.jstVars_(b,q,r)}r=h[ATT_values];if(r){n.jstValues_(b,q,r)}var j=h[ATT_eval];if(j){for(var f=0,o=jsLength(j);f<o;++f){b.jsexec(j[f],q)}}var p=h[ATT_skip];if(p){var e=b.jsexec(p,q);if(e){return}}var k=h[ATT_content];if(k){n.jstContent_(b,q,k)}else{var g=n.createArray_();var s=null;for(var m=q.firstChild;m;m=m.nextSibling){if(m.nodeType==DOM_ELEMENT_NODE){if(!s){s=b;var d=h[ATT_innerselect];if(d&&d!=VAR_this){s=b.clone(b.jsexec(d,q),0,0)}}g.push(n.jstProcessOuter_,s,m)}}if(g.length){n.push_(g)}}};JstProcessor.prototype.jstSelect_=function(a,p,l){var k=this;var n=a.jsexec(l,p);var q=domGetAttribute(p,ATT_instance);var h=false;if(q){if(q.charAt(0)==CHAR_asterisk){q=parseInt10(q.substr(1));h=true}else{q=parseInt10((q))}}var r=isArray(n);var g=r?jsLength(n):1;var c=(r&&g==0);if(r){if(c){if(!q){domSetAttribute(p,ATT_instance,STRING_asteriskzero);displayNone(p)}else{domRemoveNode(p)}}else{displayDefault(p);if(q===null||q===STRING_empty||(h&&q<g-1)){var e=k.createArray_();var f=q||0;var d,m,j;for(d=f,m=g-1;d<m;++d){var b=domCloneNode(p);domInsertBefore(b,p);jstSetInstance((b),n,d);j=a.clone(n[d],d,g);e.push(k.jstProcessInner_,j,b,JsEvalContext.recycle,j,null)}jstSetInstance(p,n,d);j=a.clone(n[d],d,g);e.push(k.jstProcessInner_,j,p,JsEvalContext.recycle,j,null);k.push_(e)}else{if(q<g){var o=n[q];jstSetInstance(p,n,q);var j=a.clone(o,q,g);var e=k.createArray_();e.push(k.jstProcessInner_,j,p,JsEvalContext.recycle,j,null);k.push_(e)}else{domRemoveNode(p)}}}}else{if(n==null){displayNone(p)}else{displayDefault(p);var j=a.clone(n,0,1);var e=k.createArray_();e.push(k.jstProcessInner_,j,p,JsEvalContext.recycle,j,null);k.push_(e)}}};JstProcessor.prototype.jstVars_=function(e,f,a){for(var d=0,c=jsLength(a);d<c;d+=2){var b=a[d];var g=e.jsexec(a[d+1],f);e.setVariable(b,g)}};JstProcessor.prototype.jstValues_=function(b,n,o){for(var d=0,l=jsLength(o);d<l;d+=2){var h=o[d];var k=b.jsexec(o[d+1],n);if(h.charAt(0)==CHAR_dollar){b.setVariable(h,k)}else{if(h.charAt(0)==CHAR_period){var m=h.substr(1).split(CHAR_period);var f=n;var e=jsLength(m);for(var c=0,g=e-1;c<g;++c){var a=m[c];if(!f[a]){f[a]={}}f=f[a]}f[m[e-1]]=k}else{if(h){if(typeof k==TYPE_boolean){if(k){jQuery(n).attr(h,h)}else{domRemoveAttribute(n,h)}}else{jQuery(n).attr(h,STRING_empty+k)}}}}}};JstProcessor.prototype.jstContent_=function(b,c,d){var e=STRING_empty+b.jsexec(d,c);if(c.innerHTML==e){return}while(c.firstChild){domRemoveNode(c.firstChild)}var a=domCreateTextNode(this.document_,e);domAppendChild(c,a)};JstProcessor.prototype.jstAttributes_=function(b){if(b[PROP_jstcache]){return b[PROP_jstcache]}var a=domGetAttribute(b,ATT_jstcache);if(a){return b[PROP_jstcache]=JstProcessor.jstcache_[a]}return JstProcessor.prepareNode_(b)};function jstGetTemplate(b,e){var d=document;var c;if(e){c=jstLoadTemplateIfNotPresent(d,b,e)}else{c=domGetElementById(d,b)}if(c){JstProcessor.prepareTemplate_(c);var a=domCloneElement(c);domRemoveAttribute(a,STRING_id);return a}else{return null}}function jstGetTemplateOrDie(b,c){var a=jstGetTemplate(b,c);return(a)}function jstLoadTemplateIfNotPresent(d,a,e,b){var c=domGetElementById(d,a);if(c){return c}jstLoadTemplate_(d,e(),b||STRING_jsts);var c=domGetElementById(d,a);if(!c){log("Error: jstGetTemplate was provided with opt_loadHtmlFn, but that function did not provide the id '"+a+"'.")}return(c)}function jstLoadTemplate_(d,b,a){var e=domGetElementById(d,a);var c;if(!e){c=domCreateElement(d,STRING_div);c.id=a;displayNone(c);positionAbsolute(c);domAppendChild(d.body,c)}else{c=e}var f=domCreateElement(d,STRING_div);c.appendChild(f);f.innerHTML=b}function jstSetInstance(c,a,b){if(b==jsLength(a)-1){domSetAttribute(c,ATT_instance,CHAR_asterisk+b)}else{domSetAttribute(c,ATT_instance,STRING_empty+b)}}var os={};os.isArray=function(a){return typeof(a)=="object"&&typeof(a.length)=="number"&&typeof(a.push)=="function"};os.VAR_my="$my";os.VAR_node="$node";os.VAR_msg="Msg";os.VAR_uniqueId="$uniqueId";os.VAR_identifierresolver="$_ir";os.VAR_emptyArray="$_ea";os.EMPTY_ARRAY=[];os.regExps_={ONLY_WHITESPACE:/^[ \t\n]*$/,VARIABLE_SUBSTITUTION:/^([\w\W]*?)(\$\{[^\}]*\})([\w\W]*)$/};os.setContextNode_=function(b,a){a.setVariable(os.VAR_node,b)};os.SEMICOLON=";";os.isIe=navigator.userAgent.indexOf("Opera")!=0&&navigator.userAgent.indexOf("MSIE")!=-1;os.operatorMap={and:"&&",eq:"==",lte:"<=",lt:"<",gte:">=",gt:">",neq:"!=",or:"||",not:"!"};os.regExps_.SPLIT_INTO_TOKENS=/"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'|\w+|[^"'\w]+/g;os.remapOperators_=function(a){return a.replace(os.regExps_.SPLIT_INTO_TOKENS,function(b){return os.operatorMap.hasOwnProperty(b)?os.operatorMap[b]:b})};os.transformVariables_=function(a){a=os.replaceTopLevelVars_(a);return a};os.variableMap_={my:os.VAR_my,My:os.VAR_my,cur:VAR_this,Cur:VAR_this,"$cur":VAR_this,Top:VAR_top,Context:VAR_loop};os.replaceTopLevelVars_=function(b){var a;a=os.regExps_.TOP_LEVEL_VAR_REPLACEMENT;if(!a){a=/(^|[^.$a-zA-Z0-9])([$a-zA-Z0-9]+)/g;os.regExps_.TOP_LEVEL_VAR_REPLACEMENT=a}return b.replace(a,function(d,e,c){if(os.variableMap_.hasOwnProperty(c)){return e+os.variableMap_[c]}else{return d}})};os.identifierResolver_=function(b,a){return b.hasOwnProperty(a)?b[a]:undefined};os.getFromContext=function(c,b,d){if(!c){return d}var a;if(c.vars_&&c.data_){if(c.data_.nodeType==DOM_ELEMENT_NODE){a=os.getValueFromNode_(c.data_,b);if(a==null){a=void (0)}}else{a=os.identifierResolver_(c.data_,b)}if(typeof(a)=="undefined"){a=os.identifierResolver_(c.vars_,b)}if(typeof(a)=="undefined"&&c.vars_[os.VAR_my]){a=os.getValueFromNode_(c.vars_[os.VAR_my],b)}if(typeof(a)=="undefined"&&c.vars_[VAR_top]){a=c.vars_[VAR_top][b]}}else{if(c.nodeType==DOM_ELEMENT_NODE){a=os.getValueFromNode_(c,b)}else{a=os.identifierResolver_(c,b)}}if(typeof(a)=="undefined"||a==null){if(typeof(d)!="undefined"){a=d}else{a=""}}else{if(d&&os.isArray(d)&&!os.isArray(a)&&a.list&&os.isArray(a.list)){a=a.list}}return a};os.transformExpression_=function(a,b){a=os.remapOperators_(a);a=os.transformVariables_(a);a=os.wrapIdentifiersInExpression(a,b);return a};os.appendJSTAttribute_=function(c,b,d){var a=c.getAttribute(b);if(a){d=a+";"+d}c.setAttribute(b,d)};os.copyAttributes_=function(f,e,a){var d=function(g){if(g.length>3&&g.substring(0,2)=="${"&&g.charAt(g.length-1)=="}"){g=g.substring(2,g.length-1)}return g};var b=$(f);var c=b.attr("repeat");if(c){os.appendJSTAttribute_(b[0],ATT_eval,"os.setContextNode_($this,$context)");b.attr(ATT_select,os.transformExpression_(d(c),os.VAR_emptyArray))}c=b.attr("if");if(c){b.attr(ATT_display,os.transformExpression_(d(c),"null"))}var c=b.attr("var");if(c){os.appendJSTAttribute_(b[0],ATT_vars,c+":$this")}jQuery.each("alt,class,href,id,src,style,target,title,value".split(","),function(j,g){var k=b.attr(g);if(k){var h=os.parseAttribute_(k);if(h){os.appendJSTAttribute_(b[0],ATT_values,g+":"+h)}}})};os.compileNode_=function(a){if(a.nodeType==DOM_TEXT_NODE){jQuery(a).replaceWith(os.breakTextNode_(a))}else{if(a.nodeType==DOM_ELEMENT_NODE){os.copyAttributes_(a,a);if(!os.processTextContent_(a,a)){jQuery(a.childNodes).each(function(b,c){os.compileNode_(c)})}}}};os.processTextContent_=function(c,b){if(c.childNodes.length==1&&c.firstChild.nodeType==DOM_TEXT_NODE){var a=os.parseAttribute_(c.firstChild.data);if(a){b.setAttribute(ATT_content,a)}return true}return false};os.pushTextNode=function(b,a){if(a.length>0){b.push(document.createTextNode(a))}};os.trimWhitespaceForIE_=function(c,d,b){if(os.isIe){var a=c.replace(/[\x09-\x0d ]+/g," ");if(d){a=a.replace(/^\s/,"")}if(b){a=a.replace(/\s$/,"")}return a}return c};os.breakTextNode_=function(g){var a=os.regExps_.VARIABLE_SUBSTITUTION;var f=g.data;var b=[];var c=f.match(a);while(c){if(c[1].length>0){os.pushTextNode(b,os.trimWhitespaceForIE_(c[1]))}var d=c[2].substring(2,c[2].length-1);if(!d){d=VAR_this}var e=document.createElement("span");e.setAttribute(ATT_content,os.transformExpression_(d));b.push(e);c=f.match(a);f=c[3];c=f.match(a)}if(f.length>0){os.pushTextNode(b,os.trimWhitespaceForIE_(f))}return b};os.transformLiteral_=function(a){return"'"+a.replace(/'/g,"\\'").replace(/\n/g," ").replace(/;/g,"'+os.SEMICOLON+'")+"'"};os.parseAttribute_=function(c){if(!c.length){return null}var a=os.regExps_.VARIABLE_SUBSTITUTION;var f=c;var e=[];var b=f.match(a);if(!b){return null}while(b){if(b[1].length>0){e.push(os.transformLiteral_(os.trimWhitespaceForIE_(b[1],e.length==0)))}var d=b[2].substring(2,b[2].length-1);if(!d){d=VAR_this}e.push("("+os.transformExpression_(d)+")");f=b[3];b=f.match(a)}if(f.length>0){e.push(os.transformLiteral_(os.trimWhitespaceForIE_(f,false,true)))}return e.join("+")};os.getValueFromNode_=function(d,b){if(b=="*"){var c=[];for(var e=d.firstChild;e;e=e.nextSibling){c.push(e)}return c}if(b.indexOf(":")>=0){b=b.substring(b.indexOf(":")+1)}var a=d[b];if(typeof(a)=="undefined"||a==null){a=d.getAttribute(b)}if(typeof(a)!="undefined"&&a!=null){if(a=="false"){a=false}else{if(a=="0"){a=0}}return a}return a};os.identifiersNotToWrap_={};os.identifiersNotToWrap_["true"]=true;os.identifiersNotToWrap_["false"]=true;os.identifiersNotToWrap_["null"]=true;os.identifiersNotToWrap_["var"]=true;os.identifiersNotToWrap_[os.VAR_my]=true;os.identifiersNotToWrap_[VAR_this]=true;os.identifiersNotToWrap_[VAR_context]=true;os.identifiersNotToWrap_[VAR_top]=true;os.identifiersNotToWrap_[VAR_loop]=true;os.canStartIdentifier=function(a){return(a>="a"&&a<="z")||(a>="A"&&a<="Z")||a=="_"||a=="$"};os.canBeInIdentifier=function(a){return os.canStartIdentifier(a)||(a>="0"&&a<="9")||a==":"};os.canBeInToken=function(a){return os.canBeInIdentifier(a)||a=="("||a==")"||a=="["||a=="]"||a=="."};os.wrapSingleIdentifier=function(a,b,c){if(os.identifiersNotToWrap_.hasOwnProperty(a)&&(!b||b==VAR_context)){return a}return os.VAR_identifierresolver+"("+(b||VAR_context)+", '"+a+"'"+(c?", "+c:"")+")"};os.wrapIdentifiersInToken=function(d,a){if(!os.canStartIdentifier(d.charAt(0))){return d}if(d.substring(0,os.VAR_msg.length+1)==(os.VAR_msg+".")){var m=d.split(".")[1];var b=jQuery.msg(m)||"";return os.parseAttribute_(b)||os.transformLiteral_(b)}var l=os.tokenToIdentifiers(d);var f=false;var g=[];var c=null;for(var k=0;k<l.length;k++){var h=l[k];f=os.breakUpParens(h);if(!f){if(k==l.length-1){c=os.wrapSingleIdentifier(h,c,a)}else{c=os.wrapSingleIdentifier(h,c)}}else{g.length=0;g.push(os.wrapSingleIdentifier(f[0],c));for(var e=1;e<f.length;e+=3){g.push(f[e]);if(f[e+1]){g.push(os.wrapIdentifiersInExpression(f[e+1]))}g.push(f[e+2])}c=g.join("")}}return c};os.wrapIdentifiersInExpression=function(d,e){var a=[];var c=os.expressionToTokens(d);for(var b=0;b<c.length;b++){a.push(os.wrapIdentifiersInToken(c[b],e))}return a.join("")};os.expressionToTokens=function(k){var h=[];var f=false;var g=false;var j=0;var b=false;var c=null;var d=[];for(var e=0;e<k.length;e++){var a=k.charAt(e);if(f){if(!b&&a==c){f=false}else{if(a=="\\"){b=true}else{b=false}}d.push(a)}else{if(a=="'"||a=='"'){f=true;c=a;d.push(a);continue}if(a=="("){j++}else{if(a==")"&&j>0){j--}}if(j>0){d.push(a);continue}if(!g&&os.canStartIdentifier(a)){if(d.length>0){h.push(d.join(""));d.length=0}g=true;d.push(a);continue}if(g){if(os.canBeInToken(a)){d.push(a)}else{h.push(d.join(""));d.length=0;g=false;d.push(a)}}else{d.push(a)}}}h.push(d.join(""));return h};os.tokenToIdentifiers=function(e){var h=false;var b=null;var g=false;var c=[];var a=[];for(var d=0;d<e.length;d++){var f=e.charAt(d);if(h){if(!g&&f==b){h=false}else{if(f=="\\"){g=true}else{g=false}}c.push(f);continue}else{if(f=="'"||f=='"'){c.push(f);h=true;b=f;continue}}if(f=="."&&!h){a.push(c.join(""));c.length=0;continue}c.push(f)}a.push(c.join(""));return a};os.breakUpParens=function(m){var g=m.indexOf("(");var e=m.indexOf("[");if(g<0&&e<0){return false}var j=[];if(g<0||(e>=0&&e<g)){g=0;j.push(m.substring(0,e))}else{e=0;j.push(m.substring(0,g))}var d=null;var l=false;var f=null;var b=0;var c=false;var h=[];for(var k=e+g;k<m.length;k++){var a=m.charAt(k);if(l){if(!c&&a==f){l=false}else{if(a=="\\"){c=true}else{c=false}}h.push(a)}else{if(a=="'"||a=='"'){l=true;f=a;h.push(a);continue}if(b==0){if(a=="("||a=="["){d=a;b++;j.push(a);h.length=0}}else{if((d=="("&&a==")")||(d=="["&&a=="]")){b--;if(b==0){j.push(h.join(""));j.push(a)}else{h.push(a)}}else{if(a==d){b++}h.push(a)}}}}return j};os.createContext=function(b,c){var a=JsEvalContext.create(b);a.setVariable(os.VAR_emptyArray,os.EMPTY_ARRAY);a.setVariable(os.VAR_identifierresolver,os.getFromContext);return a}};